{"ast":null,"code":"import { __assign, __spreadArray } from \"tslib\";\nimport * as React from \"rehackt\";\nimport { useApolloClient } from \"./useApolloClient.js\";\nimport { assertWrappedQueryRef, getSuspenseCache, unwrapQueryRef, updateWrappedQueryRef, wrapQueryRef } from \"../internal/index.js\";\nimport { useRenderGuard } from \"./internal/index.js\";\nimport { useWatchQueryOptions } from \"./useSuspenseQuery.js\";\nimport { canonicalStringify } from \"../../cache/index.js\";\nimport { invariant } from \"../../utilities/globals/index.js\";\nexport function useLoadableQuery(query, options) {\n  if (options === void 0) {\n    options = Object.create(null);\n  }\n  var client = useApolloClient(options.client);\n  var suspenseCache = getSuspenseCache(client);\n  var watchQueryOptions = useWatchQueryOptions({\n    client: client,\n    query: query,\n    options: options\n  });\n  var _a = options.queryKey,\n    queryKey = _a === void 0 ? [] : _a;\n  var _b = React.useState(null),\n    queryRef = _b[0],\n    setQueryRef = _b[1];\n  assertWrappedQueryRef(queryRef);\n  var internalQueryRef = queryRef && unwrapQueryRef(queryRef);\n  if (queryRef && (internalQueryRef === null || internalQueryRef === void 0 ? void 0 : internalQueryRef.didChangeOptions(watchQueryOptions))) {\n    var promise = internalQueryRef.applyOptions(watchQueryOptions);\n    updateWrappedQueryRef(queryRef, promise);\n  }\n  var calledDuringRender = useRenderGuard();\n  var fetchMore = React.useCallback(function (options) {\n    if (!internalQueryRef) {\n      throw new Error(\"The query has not been loaded. Please load the query.\");\n    }\n    var promise = internalQueryRef.fetchMore(options);\n    setQueryRef(wrapQueryRef(internalQueryRef));\n    return promise;\n  }, [internalQueryRef]);\n  var refetch = React.useCallback(function (options) {\n    if (!internalQueryRef) {\n      throw new Error(\"The query has not been loaded. Please load the query.\");\n    }\n    var promise = internalQueryRef.refetch(options);\n    setQueryRef(wrapQueryRef(internalQueryRef));\n    return promise;\n  }, [internalQueryRef]);\n  var loadQuery = React.useCallback(function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    invariant(!calledDuringRender(), 51);\n    var variables = args[0];\n    var cacheKey = __spreadArray([query, canonicalStringify(variables)], [].concat(queryKey), true);\n    var queryRef = suspenseCache.getQueryRef(cacheKey, function () {\n      return client.watchQuery(__assign(__assign({}, watchQueryOptions), {\n        variables: variables\n      }));\n    });\n    setQueryRef(wrapQueryRef(queryRef));\n  }, [query, queryKey, suspenseCache, watchQueryOptions, calledDuringRender, client]);\n  var subscribeToMore = React.useCallback(function (options) {\n    invariant(internalQueryRef, 52);\n    return internalQueryRef.observable.subscribeToMore(options);\n  }, [internalQueryRef]);\n  var reset = React.useCallback(function () {\n    setQueryRef(null);\n  }, []);\n  return [loadQuery, queryRef, {\n    fetchMore: fetchMore,\n    refetch: refetch,\n    reset: reset,\n    subscribeToMore: subscribeToMore\n  }];\n}","map":{"version":3,"names":["__assign","__spreadArray","React","useApolloClient","assertWrappedQueryRef","getSuspenseCache","unwrapQueryRef","updateWrappedQueryRef","wrapQueryRef","useRenderGuard","useWatchQueryOptions","canonicalStringify","invariant","useLoadableQuery","query","options","Object","create","client","suspenseCache","watchQueryOptions","_a","queryKey","_b","useState","queryRef","setQueryRef","internalQueryRef","didChangeOptions","promise","applyOptions","calledDuringRender","fetchMore","useCallback","Error","refetch","loadQuery","args","_i","arguments","length","variables","cacheKey","concat","getQueryRef","watchQuery","subscribeToMore","observable","reset"],"sources":["C:/laragon/www/php_projects/scandiweb_store/frontend/node_modules/@apollo/client/react/hooks/useLoadableQuery.js"],"sourcesContent":["import { __assign, __spreadArray } from \"tslib\";\nimport * as React from \"rehackt\";\nimport { useApolloClient } from \"./useApolloClient.js\";\nimport { assertWrappedQueryRef, getSuspenseCache, unwrapQueryRef, updateWrappedQueryRef, wrapQueryRef, } from \"../internal/index.js\";\nimport { useRenderGuard } from \"./internal/index.js\";\nimport { useWatchQueryOptions } from \"./useSuspenseQuery.js\";\nimport { canonicalStringify } from \"../../cache/index.js\";\nimport { invariant } from \"../../utilities/globals/index.js\";\nexport function useLoadableQuery(query, options) {\n    if (options === void 0) { options = Object.create(null); }\n    var client = useApolloClient(options.client);\n    var suspenseCache = getSuspenseCache(client);\n    var watchQueryOptions = useWatchQueryOptions({ client: client, query: query, options: options });\n    var _a = options.queryKey, queryKey = _a === void 0 ? [] : _a;\n    var _b = React.useState(null), queryRef = _b[0], setQueryRef = _b[1];\n    assertWrappedQueryRef(queryRef);\n    var internalQueryRef = queryRef && unwrapQueryRef(queryRef);\n    if (queryRef && (internalQueryRef === null || internalQueryRef === void 0 ? void 0 : internalQueryRef.didChangeOptions(watchQueryOptions))) {\n        var promise = internalQueryRef.applyOptions(watchQueryOptions);\n        updateWrappedQueryRef(queryRef, promise);\n    }\n    var calledDuringRender = useRenderGuard();\n    var fetchMore = React.useCallback(function (options) {\n        if (!internalQueryRef) {\n            throw new Error(\"The query has not been loaded. Please load the query.\");\n        }\n        var promise = internalQueryRef.fetchMore(options);\n        setQueryRef(wrapQueryRef(internalQueryRef));\n        return promise;\n    }, [internalQueryRef]);\n    var refetch = React.useCallback(function (options) {\n        if (!internalQueryRef) {\n            throw new Error(\"The query has not been loaded. Please load the query.\");\n        }\n        var promise = internalQueryRef.refetch(options);\n        setQueryRef(wrapQueryRef(internalQueryRef));\n        return promise;\n    }, [internalQueryRef]);\n    var loadQuery = React.useCallback(function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        invariant(!calledDuringRender(), 51);\n        var variables = args[0];\n        var cacheKey = __spreadArray([\n            query,\n            canonicalStringify(variables)\n        ], [].concat(queryKey), true);\n        var queryRef = suspenseCache.getQueryRef(cacheKey, function () {\n            return client.watchQuery(__assign(__assign({}, watchQueryOptions), { variables: variables }));\n        });\n        setQueryRef(wrapQueryRef(queryRef));\n    }, [\n        query,\n        queryKey,\n        suspenseCache,\n        watchQueryOptions,\n        calledDuringRender,\n        client,\n    ]);\n    var subscribeToMore = React.useCallback(function (options) {\n        invariant(internalQueryRef, 52);\n        return internalQueryRef.observable.subscribeToMore(options);\n    }, [internalQueryRef]);\n    var reset = React.useCallback(function () {\n        setQueryRef(null);\n    }, []);\n    return [loadQuery, queryRef, { fetchMore: fetchMore, refetch: refetch, reset: reset, subscribeToMore: subscribeToMore }];\n}\n//# sourceMappingURL=useLoadableQuery.js.map"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{Component}from'react';import logo from\"../../assets/images/logo.png\";import Cart from'../cart/Cart';import{CartProvider}from'../../context/CartContext.js';import{CartContext}from'../../context/CartContext.js';import{GET_CATEGORIES}from\"../../graphql/queries.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class Header extends Component{constructor(props){super(props);this.fetchCategories=async()=>{try{const response=await fetch('http://localhost/php_projects/scandiweb_store/backend/index.php',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({query:GET_CATEGORIES})});const result=await response.json();if(result.errors){this.setState({error:result.errors[0].message,loading:false});}else{this.setState({categories:result.data.categories,loading:false});}}catch(err){this.setState({error:'Failed to fetch categories',loading:false});}};this.state={categories:[]};}componentDidMount(){this.context.fetchCart();this.fetchCategories();}render(){const{categories,loading,error}=this.state;const{cart}=this.context;const{items,params}=this.props;if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading categories...\"});if(error)return/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]});return/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"nav\",{className:\"navbar navbar-expand-lg \",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"collapse navbar-collapse d-flex justify-content-between\",id:\"navbarNav\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"m-0 d-flex align-items-center pt-3\",children:categories.map(category=>/*#__PURE__*/_jsx(\"li\",{\"data-testid\":\"category-link\",className:params===category.name?\"nav-item active\":\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"nav-link\",\"aria-current\":\"page\",href:\"/category/\"+category.name,\"data-testid\":params===category.name?'active-category-link':'category-link',children:category.name})},category.name))}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"navbar-brand\",href:items[0].to,children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"shoppingCart\",children:/*#__PURE__*/_jsx(Cart,{cartElements:cart})})]})})})});}}Header.contextType=CartContext;export default Header;","map":{"version":3,"names":["React","Component","logo","Cart","CartProvider","CartContext","GET_CATEGORIES","jsx","_jsx","jsxs","_jsxs","Header","constructor","props","fetchCategories","response","fetch","method","headers","body","JSON","stringify","query","result","json","errors","setState","error","message","loading","categories","data","err","state","componentDidMount","context","fetchCart","render","cart","items","params","children","className","id","map","category","name","href","to","src","alt","cartElements","contextType"],"sources":["F:/scandiweb_store/frontend/src/components/header/Header.jsx"],"sourcesContent":["import React, { Component } from 'react';\r\nimport logo from \"../../assets/images/logo.png\";\r\nimport Cart from '../cart/Cart';\r\nimport { CartProvider } from '../../context/CartContext.js';\r\nimport { CartContext } from '../../context/CartContext.js';\r\nimport { GET_CATEGORIES } from \"../../graphql/queries.js\";\r\nclass Header extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            categories: [],\r\n\r\n        };\r\n    }\r\n    static contextType = CartContext;\r\n    componentDidMount() {\r\n        this.context.fetchCart();\r\n        this.fetchCategories();\r\n    }\r\n\r\n\r\n    fetchCategories = async () => {\r\n        try {\r\n\r\n            const response = await fetch('http://localhost/php_projects/scandiweb_store/backend/index.php', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ query: GET_CATEGORIES }),\r\n            });\r\n\r\n            const result = await response.json();\r\n\r\n            if (result.errors) {\r\n                this.setState({ error: result.errors[0].message, loading: false });\r\n            } else {\r\n                this.setState({ categories: result.data.categories, loading: false });\r\n            }\r\n        } catch (err) {\r\n            this.setState({ error: 'Failed to fetch categories', loading: false });\r\n        }\r\n    };\r\n\r\n\r\n\r\n    render() {\r\n        const { categories, loading, error } = this.state;\r\n        const { cart } = this.context;\r\n\r\n\r\n        const { items, params } = this.props;\r\n        if (loading) return <p>Loading categories...</p>;\r\n        if (error) return <p>Error: {error}</p>;\r\n\r\n        return (\r\n            <header>\r\n                <nav className=\"navbar navbar-expand-lg \">\r\n                    <div className=\"container\">\r\n                        <div className=\"collapse navbar-collapse d-flex justify-content-between\" id=\"navbarNav\">\r\n                            <ul className=\"m-0 d-flex align-items-center pt-3\">\r\n                                {categories.map((category) => (\r\n                                    <li\r\n                                        data-testid='category-link'\r\n                                        className={params === category.name ? \"nav-item active\" : \"nav-item\"}\r\n                                        key={category.name}\r\n                                    >\r\n                                        <a\r\n                                            className=\"nav-link\"\r\n                                            aria-current=\"page\"\r\n                                            href={\"/category/\" + category.name}\r\n                                            data-testid={params === category.name ? 'active-category-link' : 'category-link'}\r\n                                        >\r\n                                            {category.name}\r\n                                        </a>\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                            <div>\r\n                                <a className=\"navbar-brand\" href={items[0].to}>\r\n                                    <img src={logo} alt='logo' />\r\n                                </a>\r\n                            </div>\r\n                            <div className='shoppingCart'>\r\n\r\n                                <Cart cartElements={cart} />\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </nav>\r\n            </header>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Header;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}